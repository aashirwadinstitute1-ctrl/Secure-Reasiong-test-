<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - Secure Exam</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; margin: 0; padding: 20px; }
    h1 { text-align: center; color: #2563eb; }
    .container { display: flex; gap: 20px; margin-top: 20px; }
    .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); flex: 1; }
    h2 { margin-top: 0; color: #333; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 10px; border: 1px solid #ddd; text-align: center; }
    th { background: #2563eb; color: white; }
    input, textarea { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; }
    button { padding: 8px 15px; background: #2563eb; color: white; border: none; border-radius: 5px; margin-top: 10px; cursor: pointer; }
    button:hover { background: #1d4ed8; }
  </style>
</head>
<body>
  <h1>üîê Admin Panel</h1>
  <div class="container">
    <!-- Results Section -->
    <div class="card">
      <h2>üìä Student Results</h2>
      <table id="resultsTable">
        <thead>
          <tr>
            <th>Student ID</th>
            <th>Name</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Question Manager -->
    <div class="card">
      <h2>üìù Manage Questions</h2>
      <label>Question</label>
      <textarea id="questionText"></textarea>

      <label>Option A</label>
      <input type="text" id="optA">

      <label>Option B</label>
      <input type="text" id="optB">

      <label>Option C</label>
      <input type="text" id="optC">

      <label>Option D</label>
      <input type="text" id="optD">

      <label>Correct Answer (A/B/C/D)</label>
      <input type="text" id="correctAns">

      <button onclick="addQuestion()">‚ûï Add Question</button>

      <h3>Current Questions</h3>
      <table id="questionTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Question</th>
            <th>Answer</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    // Load results from localStorage
    function loadResults() {
      const results = JSON.parse(localStorage.getItem("examResults")) || [];
      const tbody = document.querySelector("#resultsTable tbody");
      tbody.innerHTML = "";
      results.forEach(r => {
        tbody.innerHTML += `
          <tr>
            <td>${r.id}</td>
            <td>${r.name}</td>
            <td>${r.score}</td>
          </tr>
        `;
      });
    }

    // Load questions
    function loadQuestions() {
      const questions = JSON.parse(localStorage.getItem("questions")) || [];
      const tbody = document.querySelector("#questionTable tbody");
      tbody.innerHTML = "";
      questions.forEach((q, index) => {
        tbody.innerHTML += `
          <tr>
            <td>${index+1}</td>
            <td>${q.text}</td>
            <td>${q.correct}</td>
            <td><button onclick="deleteQuestion(${index})">‚ùå Delete</button></td>
          </tr>
        `;
      });
    }

    // Add question
    function addQuestion() {
      const text = document.getElementById("questionText").value;
      const optA = document.getElementById("optA").value;
      const optB = document.getElementById("optB").value;
      const optC = document.getElementById("optC").value;
      const optD = document.getElementById("optD").value;
      const correct = document.getElementById("correctAns").value.toUpperCase();

      if(!text || !optA || !optB || !optC || !optD || !["A","B","C","D"].includes(correct)) {
        alert("‚ö†Ô∏è Please fill all fields correctly!");
        return;
      }

      const newQ = { text, options: {A: optA, B: optB, C: optC, D: optD}, correct };
      const questions = JSON.parse(localStorage.getItem("questions")) || [];
      questions.push(newQ);
      localStorage.setItem("questions", JSON.stringify(questions));

      alert("‚úÖ Question added successfully!");
      loadQuestions();

      document.getElementById("questionText").value = "";
      document.getElementById("optA").value = "";
      document.getElementById("optB").value = "";
      document.getElementById("optC").value = "";
      document.getElementById("optD").value = "";
      document.getElementById("correctAns").value = "";
    }

    // Delete question
    function deleteQuestion(index) {
      const questions = JSON.parse(localStorage.getItem("questions")) || [];
      questions.splice(index, 1);
      localStorage.setItem("questions", JSON.stringify(questions));
      loadQuestions();
    }

    loadResults();
    loadQuestions();
  </script>
</body>
</html>        <th>Action</th>
      </tr>
    </table>
  </section>

  <script>
    // Store data in localStorage
    const students = JSON.parse(localStorage.getItem("students")) || [];
    const results = JSON.parse(localStorage.getItem("results")) || [];
    const questions = JSON.parse(localStorage.getItem("questions")) || [];

    function saveData() {
      localStorage.setItem("students", JSON.stringify(students));
      localStorage.setItem("results", JSON.stringify(results));
      localStorage.setItem("questions", JSON.stringify(questions));
    }

    // Student Management
    function addStudent() {
      const name = document.getElementById("studentName").value;
      const id = document.getElementById("studentId").value;
      const mobile = document.getElementById("studentMobile").value;
      const photo = document.getElementById("studentPhoto").value;

      students.push({ name, id, mobile, photo });
      saveData();
      renderStudents();
    }

    function deleteStudent(index) {
      students.splice(index, 1);
      saveData();
      renderStudents();
    }

    function renderStudents() {
      const table = document.getElementById("studentTable");
      table.innerHTML = `
        <tr>
          <th>Photo</th>
          <th>Name</th>
          <th>ID</th>
          <th>Mobile</th>
          <th>Action</th>
        </tr>`;
      students.forEach((s, i) => {
        table.innerHTML += `
          <tr>
            <td><img src="${s.photo}" alt="Photo"></td>
            <td>${s.name}</td>
            <td>${s.id}</td>
            <td>${s.mobile}</td>
            <td><button onclick="deleteStudent(${i})">Delete</button></td>
          </tr>`;
      });
    }

    // Exam Results
    function renderResults() {
      const table = document.getElementById("resultTable");
      table.innerHTML = `
        <tr>
          <th>Student ID</th>
          <th>Name</th>
          <th>Score</th>
        </tr>`;
      results.forEach(r => {
        table.innerHTML += `
          <tr>
            <td>${r.id}</td>
            <td>${r.name}</td>
            <td>${r.score}</td>
          </tr>`;
      });
    }

    // Question Management
    function addQuestion() {
      const text = document.getElementById("questionText").value;
      const a = document.getElementById("optionA").value;
      const b = document.getElementById("optionB").value;
      const c = document.getElementById("optionC").value;
      const d = document.getElementById("optionD").value;
      const correct = document.getElementById("correctAnswer").value.toUpperCase();

      const id = questions.length + 1;
      questions.push({ id, text, options: { a, b, c, d }, correct });
      saveData();
      renderQuestions();
    }

    function deleteQuestion(index) {
      questions.splice(index, 1);
      saveData();
      renderQuestions();
    }

    function renderQuestions() {
      const table = document.getElementById("questionTable");
      table.innerHTML = `
        <tr>
          <th>ID</th>
          <th>Question</th>
          <th>Answer</th>
          <th>Action</th>
        </tr>`;
      questions.forEach((q, i) => {
        table.innerHTML += `
          <tr>
            <td>${q.id}</td>
            <td>${q.text}</td>
            <td>${q.correct}</td>
            <td><button onclick="deleteQuestion(${i})">Delete</button></td>
          </tr>`;
      });
    }

    // Load data on page load
    renderStudents();
    renderResults();
    renderQuestions();
  </script>
</body>
</html>
